<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Stock Prediction System - Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
</head>
<body>
    <button class="mobile-menu-toggle" id="mobile-menu-toggle">‚ò∞</button>
    <div class="dashboard-container">
        <!-- Navigation Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2>AI Stock Predictor</h2>
                <div class="status-indicator">
                    <span id="system-status" class="status-dot online"></span>
                    <span class="status-text">Online</span>
                </div>
            </div>
            
            <ul class="nav-menu">
                <li><a href="#dashboard" class="nav-link active" data-page="dashboard">
                    <span class="nav-icon">üìä</span> Dashboard
                </a></li>
                <li><a href="#models" class="nav-link" data-page="models">
                    <span class="nav-icon">ü§ñ</span> Model Performance
                </a></li>
                <li><a href="#predictions" class="nav-link" data-page="predictions">
                    <span class="nav-icon">üìà</span> Real-time Predictions
                </a></li>
                <li><a href="#news" class="nav-link" data-page="news">
                    <span class="nav-icon">üì∞</span> News Analysis
                </a></li>
                <li><a href="#feature-importance" class="nav-link" data-page="feature-importance">
                    <span class="nav-icon">üìä</span> Feature Importance
                </a></li>
                <li><a href="#shap-analysis" class="nav-link" data-page="shap-analysis">
                    <span class="nav-icon">üîç</span> SHAP Analysis
                </a></li>
                <li><a href="#model-explainability" class="nav-link" data-page="model-explainability">
                    <span class="nav-icon">ü§ñ</span> Model Explainability
                </a></li>
                <li><a href="#prediction-explanation" class="nav-link" data-page="prediction-explanation">
                    <span class="nav-icon">üí°</span> Prediction Explanation
                </a></li>
                <li><a href="#debug" class="nav-link" data-page="debug">
                    <span class="nav-icon">üîç</span> Debug Dashboard
                </a></li>
            </ul>
            
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Header -->
            <header class="content-header">
                <h1 id="page-title">Dashboard</h1>
                <div class="header-actions">
                    <div class="live-indicator">
                        <div class="live-dot"></div>
                        <span>Real-time Updates</span>
                    </div>
                    <div class="translate-container">
                        <button class="btn btn-translate" id="translate-btn">
                            <span>üåê</span> EN
                        </button>
                        <div class="language-dropdown" id="language-dropdown">
                            <div class="language-option" data-lang="en">üá∫üá∏ English</div>
                            <div class="language-option" data-lang="ko">üá∞üá∑ ÌïúÍµ≠Ïñ¥</div>
                            <div class="language-option" data-lang="ja">üáØüáµ Êó•Î≥∏Ë™û</div>
                            <div class="language-option" data-lang="zh">üá®üá≥ ‰∏≠Êñá</div>
                            <div class="language-option" data-lang="es">üá™üá∏ Espa√±ol</div>
                            <div class="language-option" data-lang="fr">üá´üá∑ Fran√ßais</div>
                            <div class="language-option" data-lang="de">üá©üá™ Deutsch</div>
                        </div>
                    </div>
                    <button class="btn btn-gradient" onclick="dashboard.refreshAllData()">
                        <span>üîÑ</span> Refresh
                    </button>
                    <button class="btn btn-export" onclick="dashboard.exportData()">
                        <span>üíæ</span> Export
                    </button>
                    <button class="btn btn-fullscreen" onclick="dashboard.toggleFullscreen()">
                        <span>üîç</span> Fullscreen
                    </button>
                </div>
            </header>

            <!-- Page Content Container -->
            <div class="page-content">
                <!-- Dashboard Page -->
                <div id="page-dashboard" class="page active">
                            <!-- Real-time System Status -->
                            <section class="widget large-widget">
                <h2>Real-time System Status</h2>
                <div class="system-metrics">
                    <div class="metric-card">
                        <h3>Model Performance</h3>
                        <div id="model-accuracy" class="metric-value">--</div>
                        <div class="metric-label">Accuracy</div>
                    </div>
                    <div class="metric-card">
                        <h3>Processing Speed</h3>
                        <div id="processing-speed" class="metric-value">--</div>
                        <div class="metric-label">Predictions/sec</div>
                    </div>
                    <div class="metric-card">
                        <h3>Active Models</h3>
                        <div id="active-models" class="metric-value">--</div>
                        <div class="metric-label">Count</div>
                    </div>
                    <div class="metric-card">
                        <h3>Data Sources</h3>
                        <div id="data-sources" class="metric-value">--</div>
                        <div class="metric-label">Connected</div>
                    </div>
                </div>
            </section>

            <!-- Model Performance Chart -->
            <section class="widget medium-widget">
                <h2>Model Performance Trend</h2>
                <div class="model-performance-info">
                    <strong>Reference Stock:</strong> Current model performance is measured against the <span id="performance-stock-info">S&P 500 overall average</span>.
                </div>
                <canvas id="performance-chart"></canvas>
            </section>

            <!-- Real-time Predictions -->
            <section class="widget medium-widget">
                <h2>Real-time Prediction Results</h2>
                <div class="predictions-container" id="realtime-predictions-dashboard">
                    <div class="prediction-item">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span class="stock-symbol">AAPL</span>
                            <span class="prediction-direction up">+2.3%</span>
                        </div>
                        <div class="prediction-confidence">
                            <span class="confidence">Confidence: 87%</span>
                            <div class="confidence-bar">
                                <div class="confidence-fill" style="width: 87%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="prediction-item">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span class="stock-symbol">GOOGL</span>
                            <span class="prediction-direction down">-1.2%</span>
                        </div>
                        <div class="prediction-confidence">
                            <span class="confidence">Confidence: 92%</span>
                            <div class="confidence-bar">
                                <div class="confidence-fill" style="width: 92%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="prediction-item">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span class="stock-symbol">MSFT</span>
                            <span class="prediction-direction up">+0.8%</span>
                        </div>
                        <div class="prediction-confidence">
                            <span class="confidence">Confidence: 79%</span>
                            <div class="confidence-bar">
                                <div class="confidence-fill" style="width: 79%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Trading Volume Chart -->
            <section class="widget large-widget">
                <h2>Trading Volume Analysis</h2>
                <div class="volume-analysis-container">
                    <div class="volume-summary" id="volume-summary">
                        <div class="volume-metric">
                            <span class="label">Total Volume</span>
                            <span id="total-volume">310.6M</span>
                        </div>
                        <div class="volume-metric">
                            <span class="label">Average Volume</span>
                            <span id="avg-volume">44.4M</span>
                        </div>
                        <div class="volume-metric">
                            <span class="label">Max Volume</span>
                            <span id="max-volume">NVDA (89.1M)</span>
                        </div>
                        <div class="volume-metric">
                            <span class="label">Unusual Volume Detected</span>
                            <span class="metric-value alert" id="volume-alerts">2 cases</span>
                        </div>
                    </div>
                    <canvas id="volume-chart"></canvas>
                </div>
            </section>

            <!-- System Logs -->
            <section class="widget large-widget">
                <h2>System Logs</h2>
                <div class="log-container" id="system-logs">
                    <div class="log-entry info">
                        <span class="timestamp">14:32:15</span>
                        <span class="log-level">INFO</span>
                        <span class="log-message">Model training completed - Accuracy: 89.3%</span>
                    </div>
                    <div class="log-entry success">
                        <span class="timestamp">14:31:42</span>
                        <span class="log-level">SUCCESS</span>
                        <span class="log-message">Data collection pipeline operating normally</span>
                    </div>
                    <div class="log-entry warning">
                        <span class="timestamp">14:30:18</span>
                        <span class="log-level">WARNING</span>
                        <span class="log-message">API response delay detected: average 1.2 seconds</span>
                    </div>
                </div>
            </section>

            <!-- Model Comparison -->
            <section class="widget medium-widget">
                <h2>Model Comparison</h2>
                <canvas id="model-comparison-chart"></canvas>
            </section>

            <!-- Alert Panel -->
            <section class="widget small-widget">
                <h2>Alerts</h2>
                <div class="alert-list">
                    <div class="alert-item high">
                        <span class="alert-icon">‚ö†Ô∏è</span>
                        <span class="alert-message">High Volatility Detected</span>
                    </div>
                    <div class="alert-item medium">
                        <span class="alert-icon">üìä</span>
                        <span class="alert-message">Model Retraining Recommended</span>
                    </div>
                    <div class="alert-item low">
                        <span class="alert-icon">üíæ</span>
                        <span class="alert-message">Backup Completed</span>
                    </div>
                </div>
            </section>
                </div>

                <!-- Models Performance Page -->
                <div id="page-models" class="page">
                    <div class="models-container">
                        <div class="models-grid">
                            <div class="widget large-widget">
                                <h2>Model Performance Comparison</h2>
                                <div class="model-comparison-table">
                                    <table class="performance-table">
                                        <thead>
                                            <tr>
                                                <th>Model</th>
                                                <th>Accuracy</th>
                                                <th>Precision</th>
                                                <th>Recall</th>
                                                <th>F1-Score</th>
                                                <th>Processing Time</th>
                                                <th>Status</th>
                                            </tr>
                                        </thead>
                                        <tbody id="model-performance-table">
                                            <!-- Dynamically generated -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                            <div class="widget medium-widget">
                                <h2>Model Architecture</h2>
                                <div class="model-architecture" id="model-architecture">
                                    <!-- Dynamically generated -->
                                </div>
                            </div>
                            
                            <div class="widget medium-widget">
                                <h2>Hyperparameters</h2>
                                <div class="hyperparameters" id="hyperparameters">
                                    <!-- Dynamically generated -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Real-time Predictions Page -->
                <div id="page-predictions" class="page">
                    <div class="predictions-container">
                        <div class="predictions-header">
                            <h2>Real-time Stock Predictions</h2>
                            <div class="prediction-controls">
                                <select id="stock-selector">
                                    <option value="all">All Stocks</option>
                                    <option value="AAPL">Apple (AAPL)</option>
                                    <option value="GOOGL">Google (GOOGL)</option>
                                    <option value="MSFT">Microsoft (MSFT)</option>
                                </select>
                                <select id="timeframe-selector">
                                    <option value="1d">1 Day</option>
                                    <option value="1w">1 Week</option>
                                    <option value="1m">1 Month</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="predictions-grid">
                            <div class="widget large-widget">
                                <h3>Prediction Chart</h3>
                                <div class="stock-selector-container">
                                    <div class="stock-selector-label">Select Stock for Chart:</div>
                                    <select class="stock-selector" id="prediction-stock-selector">
                                        <option value="AAPL">Apple Inc. (AAPL)</option>
                                        <option value="GOOGL">Alphabet Inc. (GOOGL)</option>
                                        <option value="MSFT">Microsoft Corp. (MSFT)</option>
                                        <option value="AMZN">Amazon.com Inc. (AMZN)</option>
                                        <option value="TSLA">Tesla Inc. (TSLA)</option>
                                        <option value="META">Meta Platforms Inc. (META)</option>
                                        <option value="NVDA">NVIDIA Corp. (NVDA)</option>
                                        <option value="NFLX">Netflix Inc. (NFLX)</option>
                                        <option value="JPM">JPMorgan Chase & Co. (JPM)</option>
                                        <option value="UNH">UnitedHealth Group Inc. (UNH)</option>
                                    </select>
                                    <div class="chart-description" id="prediction-chart-description">
                                        Currently displaying real-time price prediction chart for Apple Inc. (AAPL). 
                                        The blue solid line represents the actual price, and the red dashed line represents the AI model's predicted price.
                                    </div>
                                </div>
                                <div class="chart-wrapper">
                                    <canvas id="prediction-chart"></canvas>
                                </div>
                            </div>
                            
                            <div class="widget medium-widget">
                                <h3>Prediction Confidence</h3>
                                <div class="confidence-meters" id="confidence-meters">
                                    <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê® -->
                                </div>
                            </div>
                            
                            <div class="widget large-widget">
                                <h3>S&P 500 Prediction Results</h3>
                                <div class="table-controls">
                                    <div class="pagination-info">
                                        <span id="pagination-info">1-20 of 500 Stocks</span>
                                    </div>
                                    <div class="table-search">
                                        <input type="text" id="symbol-search" placeholder="Search Stock (e.g., AAPL)">
                                        <select id="sector-filter">
                                            <option value="all">All Sectors</option>
                                            <option value="Technology">Technology</option>
                                            <option value="Healthcare">Healthcare</option>
                                            <option value="Financials">Financials</option>
                                            <option value="Consumer">Consumer</option>
                                            <option value="Industrials">Industrials</option>
                                            <option value="Energy">Energy</option>
                                            <option value="Utilities">Utilities</option>
                                            <option value="Materials">Materials</option>
                                            <option value="Real Estate">Real Estate</option>
                                            <option value="Communication">Communication</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="predictions-table-container">
                                    <table class="predictions-table">
                                        <thead>
                                            <tr>
                                                <th>No.</th>
                                                <th>Symbol</th>
                                                <th>Company Name</th>
                                                <th>Sector</th>
                                                <th>Current Price</th>
                                                <th>Predicted Price</th>
                                                <th>Change %</th>
                                                <th>Confidence</th>
                                                <th>Prediction Time</th>
                                            </tr>
                                        </thead>
                                        <tbody id="predictions-table-body">
                                            <!-- Dynamically generated -->
                                        </tbody>
                                    </table>
                                </div>
                                <div class="pagination-container">
                                    <div class="pagination-controls">
                                    <button id="prev-page" class="pagination-btn">‚óÄ Previous</button>
                                    <div class="page-numbers" id="page-numbers">
                                        <!-- Dynamically generated -->
                                    </div>
                                    <button id="next-page" class="pagination-btn">Next ‚ñ∂</button>
                                </div>
                                <div class="pagination-summary">
                                    <select id="items-per-page">
                                        <option value="10">10 items</option>
                                        <option value="20" selected>20 items</option>
                                        <option value="50">50 items</option>
                                        <option value="100">100 items</option>
                                    </select>
                                </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- News Analysis Page -->
                <div id="page-news" class="page">
                    <div class="news-container">
                        <div class="news-header">
                            <h2>Real-time News Analysis</h2>
                            <div class="news-controls">
                                <select id="news-category">
                                    <option value="all">All Categories</option>
                                    <option value="market">Market</option>
                                    <option value="stock">Individual Stock</option>
                                    <option value="economy">Economy</option>
                                </select>
                                <select id="sentiment-filter">
                                    <option value="all">All Sentiments</option>
                                    <option value="positive">Positive</option>
                                    <option value="negative">Negative</option>
                                    <option value="neutral">Neutral</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="news-grid">
                            <div class="widget large-widget">
                                <h3>Sentiment Analysis Chart</h3>
                                <canvas id="sentiment-chart"></canvas>
                            </div>
                            
                            <div class="widget medium-widget">
                                <h3>News Summary</h3>
                                <div class="news-summary" id="news-summary">
                                    <div class="summary-item">
                                        <h4>Key Trends</h4>
                                        <p>The market is generally showing a positive sentiment today.</p>
                                    </div>
                                    <div class="summary-item">
                                        <h4>High Impact News</h4>
                                        <p>Fed interest rate hike comments are significantly impacting the market.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="widget medium-widget">
                                <h3>LLM Analysis Summary</h3>
                                <div class="llm-analysis-summary" id="llm-analysis-summary">
                                    <div class="summary-item">
                                        <h4>Market Sentiment (LLM)</h4>
                                        <p id="llm-market-sentiment">Loading...</p>
                                    </div>
                                    <div class="summary-item">
                                        <h4>Key Event Category (LLM)</h4>
                                        <p id="llm-event-category">Loading...</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="widget large-widget">
                                <h3>Real-time News Feed</h3>
                                <div class="news-feed-controls">
                                    <button id="load-more-news" class="btn btn-gradient">Load More News</button>
                                    <span id="news-loading-indicator" class="loading-indicator" style="display: none;">
                                        <div class="live-dot"></div>
                                        Loading news...
                                    </span>
                                </div>
                                <div class="news-feed" id="news-feed">
                                    <!-- Dynamically generated -->
                                </div>
                                <div id="news-scroll-end" class="scroll-end-message" style="display: none;">
                                    All news loaded.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- Feature Importance Page -->
                <div id="page-feature-importance" class="page">
                    <div class="xai-container">
                        <div class="xai-header">
                            <h2>Feature Importance Analysis</h2>
                            <div class="xai-controls">
                                <select id="feature-model-selector">
                                    <option value="random_forest">Random Forest</option>
                                    <option value="gradient_boosting">Gradient Boosting</option>
                                    <option value="neural_network">Neural Network</option>
                                </select>
                                <button class="btn" id="refresh-feature-btn">Refresh Analysis</button>
                            </div>
                        </div>
                        
                        <div class="widget">
                            <h3>Feature Importance Overview</h3>
                            <p class="xai-description">
                                Feature importance analysis identifies which features have the greatest impact on model predictions. This helps understand what data points the AI considers most valuable for making stock predictions.
                            </p>
                        </div>

                        <div class="widget">
                            <h3>Global Feature Analysis</h3>
                            <div class="xai-grid">
                                <div id="feature-importance-chart" class="xai-chart-container">
                                    <h4>Feature Importance Ranking</h4>
                                    <p>Shows the features that the model considers most important when generating predictions.</p>
                                </div>
                                <div id="partial-dependence-plot" class="xai-chart-container">
                                    <h4>Partial Dependence Plot</h4>
                                    <p>Shows how the model's predictions change when the value of a specific feature changes.</p>
                                </div>
                                <div id="feature-correlation-heatmap" class="xai-chart-container">
                                    <h4>Feature Correlation Heatmap</h4>
                                    <div id="correlation-heatmap-chart"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SHAP Analysis Page -->
                <div id="page-shap-analysis" class="page">
                    <div class="xai-container">
                        <div class="xai-header">
                            <h2>SHAP (SHapley Additive exPlanations) Analysis</h2>
                            <div class="xai-controls">
                                <select id="shap-model-selector">
                                    <option value="random_forest">Random Forest</option>
                                    <option value="gradient_boosting">Gradient Boosting</option>
                                    <option value="neural_network">Neural Network</option>
                                </select>
                                <button class="btn" id="refresh-shap-btn">Refresh Analysis</button>
                            </div>
                        </div>
                        
                        <div class="widget">
                            <h3>SHAP Overview</h3>
                            <p class="xai-description">
                                SHAP values provide a unified framework for understanding model predictions by showing the contribution of each feature to individual predictions and overall model behavior.
                            </p>
                        </div>

                        <div class="widget">
                            <h3>SHAP Analysis Results</h3>
                            <div class="xai-grid">
                                <div id="shap-summary-plot" class="xai-chart-container">
                                    <h4>SHAP Summary Plot</h4>
                                    <p>Shows the magnitude and direction of each feature's impact on the model output across the entire dataset.</p>
                                </div>
                                <div id="shap-force-plot" class="xai-chart-container">
                                    <h4>SHAP Force Plot</h4>
                                    <p>Visually shows how much each feature contributed to increasing or decreasing the prediction for a selected individual prediction.</p>
                                </div>
                                <div id="shap-dependence-plot" class="xai-chart-container">
                                    <h4>SHAP Dependence Plot</h4>
                                    <p>Shows the relationship between a feature's value and its impact on the model's output.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="widget">
                            <h3>Individual Prediction Analysis</h3>
                            <div class="xai-controls">
                                <p class="xai-description">
                                    Analyze SHAP values for specific stock predictions to understand individual prediction reasoning.
                                </p>
                                <select id="shap-stock-selector">
                                    <option value="AAPL">Apple (AAPL)</option>
                                    <option value="MSFT">Microsoft (MSFT)</option>
                                    <option value="GOOGL">Google (GOOGL)</option>
                                    <option value="AMZN">Amazon (AMZN)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Model Explainability Page -->
                <div id="page-model-explainability" class="page">
                    <div class="xai-container">
                        <div class="xai-header">
                            <h2>Advanced Model Explainability</h2>
                            <div class="xai-controls">
                                <select id="explainability-model-selector">
                                    <option value="random_forest">Random Forest</option>
                                    <option value="gradient_boosting">Gradient Boosting</option>
                                    <option value="neural_network">Neural Network</option>
                                </select>
                                <button class="btn" id="refresh-explainability-btn">Refresh Analysis</button>
                            </div>
                        </div>
                        
                        <div class="widget">
                            <h3>Model Interpretability Overview</h3>
                            <p class="xai-description">
                                Advanced techniques for understanding complex model behavior including gradient-based attribution, layer-wise analysis, and decision boundaries.
                            </p>
                        </div>

                        <div class="widget">
                            <h3>Advanced Interpretability Methods</h3>
                            <div class="xai-grid">
                                <div id="decision-tree-viz" class="xai-chart-container">
                                    <h4>Decision Tree Visualization</h4>
                                    <div id="decision-tree-container"></div>
                                </div>
                                <div id="gradient-analysis" class="xai-chart-container">
                                    <h4>Gradient-based Attribution</h4>
                                    <canvas id="gradient-attribution-chart"></canvas>
                                </div>
                                <div id="layer-wise-relevance" class="xai-chart-container">
                                    <h4>Layer-wise Relevance Propagation</h4>
                                    <canvas id="lrp-chart"></canvas>
                                </div>
                                <div id="integrated-gradients" class="xai-chart-container">
                                    <h4>Integrated Gradients</h4>
                                    <canvas id="integrated-gradients-chart"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <div class="widget">
                            <h3>Model Performance Analysis</h3>
                            <div class="xai-grid">
                                <div id="model-performance-metrics" class="xai-chart-container">
                                    <h4>Performance Metrics Dashboard</h4>
                                    <canvas id="performance-metrics-chart"></canvas>
                                </div>
                                <div id="learning-curves" class="xai-chart-container">
                                    <h4>Learning Curves</h4>
                                    <canvas id="learning-curves-chart"></canvas>
                                </div>
                                <div id="validation-curves" class="xai-chart-container">
                                    <h4>Validation Curves</h4>
                                    <canvas id="validation-curves-chart"></canvas>
                                </div>
                                <div id="confusion-matrix" class="xai-chart-container">
                                    <h4>Confusion Matrix and Error Analysis</h4>
                                    <p>Shows how well the model's predictions match actual values and analyzes what types of errors it makes.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Prediction Explanation Page -->
                <div id="page-prediction-explanation" class="page">
                    <div class="xai-container">
                        <div class="xai-header">
                            <h2>Individual Prediction Explanations</h2>
                            <div class="xai-controls">
                                <select id="prediction-model-selector">
                                    <option value="random_forest">Random Forest</option>
                                    <option value="gradient_boosting">Gradient Boosting</option>
                                    <option value="neural_network">Neural Network</option>
                                </select>
                                <button class="btn" id="refresh-prediction-btn">Refresh Analysis</button>
                            </div>
                        </div>
                        
                        <div class="widget">
                            <h3>Prediction Explanation Overview</h3>
                            <p class="xai-description">
                                Detailed analysis of individual predictions including LIME explanations, counterfactual analysis, and what-if scenarios to understand specific prediction reasoning.
                            </p>
                        </div>

                        <div class="widget">
                            <h3>Local Prediction Analysis</h3>
                            <div class="xai-controls">
                                <p class="xai-description">
                                    Analyzes in detail why a specific prediction was made. You can check which factors positively or negatively influenced the recent prediction of a particular stock.
                                </p>
                                <select id="explanation-stock-selector">
                                    <option value="AAPL">Apple (AAPL)</option>
                                    <option value="MSFT">Microsoft (MSFT)</option>
                                    <option value="GOOGL">Google (GOOGL)</option>
                                    <option value="AMZN">Amazon (AMZN)</option>
                                </select>
                            </div>
                            <div class="xai-grid">
                                <div id="lime-explanation" class="xai-chart-container">
                                    <h4>LIME Explanation</h4>
                                    <p>Approximates a complex model with a locally simple model to explain the main contributing features for a specific prediction.</p>
                                </div>
                                <div id="local-feature-importance" class="xai-chart-container">
                                    <h4>Local Feature Importance</h4>
                                    <canvas id="local-feature-importance-chart"></canvas>
                                </div>
                                <div id="counterfactual-what-if" class="xai-chart-container">
                                    <h4>Counterfactual/What-if Analysis</h4>
                                    <p>Shows what features need to be minimally changed to alter the prediction result. (e.g., "If the 5-day moving average was 2% higher, the prediction would have been 'up' instead of 'down'.")</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="widget">
                            <h3>Real-time Model Monitoring</h3>
                            <div class="xai-grid">
                                <div id="prediction-confidence-dist" class="xai-chart-container">
                                    <h4>Prediction Confidence Distribution</h4>
                                    <canvas id="confidence-distribution-chart"></canvas>
                                </div>
                                <div id="model-drift-detection" class="xai-chart-container">
                                    <h4>Data Drift Detection</h4>
                                    <canvas id="drift-detection-chart"></canvas>
                                </div>
                                <div id="prediction-vs-actual" class="xai-chart-container">
                                    <h4>Prediction vs Actual</h4>
                                    <canvas id="prediction-actual-chart"></canvas>
                                </div>
                                <div id="ensemble-voting" class="xai-chart-container">
                                    <h4>Ensemble Model Voting</h4>
                                    <canvas id="ensemble-voting-chart"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <div class="widget">
                            <h3>Model Behavior Summary and Recommendations</h3>
                            <div id="xai-summary-recommendation">
                                <p><strong>Current Model Behavior Summary:</strong></p>
                                <ul>
                                    <li>The current model tends to use <strong>'recent 5-day trading volume change'</strong> and <strong>'news article sentiment score'</strong> as the most important predictors.</li>
                                    <li>Specifically, when predicting technology stocks, it gives high weight to the <strong>'correlation with the Nasdaq index'</strong> feature.</li>
                                    <li>The model shows more reliance on long-term moving averages than short-term volatility.</li>
                                </ul>
                                <p><strong>Recommendations:</strong></p>
                                <ul>
                                    <li>If prediction confidence is below 80%, it is recommended to take a conservative approach as the prediction is likely influenced by volatile market conditions.</li>
                                    <li>You can refer to 'Counterfactual Analysis' to see what factors can change predictions and use this for your investment strategy.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>



                <!-- Debug Dashboard Page -->
                <div id="page-debug" class="page">
                    <div class="debug-container">
                        <div class="debug-header">
                            <h2>üîç System Debug Dashboard</h2>
                            <div class="debug-actions">
                                <button class="btn btn-primary" onclick="debugDashboard.refreshAll()">
                                    <span>üîÑ</span> Refresh All
                                </button>
                                <button class="btn btn-export" onclick="debugDashboard.exportReport()">
                                    <span>üìä</span> Export Report
                                </button>
                            </div>
                        </div>

                        <div class="debug-grid">
                            <!-- System Overview -->
                            <div class="widget large-widget">
                                <h3>üìä System Overview</h3>
                                <div class="system-status-grid">
                                    <div class="status-card">
                                        <div class="status-indicator" id="overall-status"></div>
                                        <div class="status-info">
                                            <h4>Overall System</h4>
                                            <span id="overall-status-text">Checking...</span>
                                        </div>
                                    </div>
                                    <div class="status-card">
                                        <div class="status-indicator" id="server-status"></div>
                                        <div class="status-info">
                                            <h4>Server Connection</h4>
                                            <span id="server-status-text">Checking...</span>
                                        </div>
                                    </div>
                                    <div class="status-card">
                                        <div class="status-indicator" id="network-status"></div>
                                        <div class="status-info">
                                            <h4>Network Status</h4>
                                            <span id="network-status-text">Checking...</span>
                                        </div>
                                    </div>
                                    <div class="status-card">
                                        <div class="status-indicator" id="api-status"></div>
                                        <div class="status-info">
                                            <h4>API Services</h4>
                                            <span id="api-status-text">Checking...</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Chart Rendering Status -->
                            <div class="widget large-widget">
                                <h3>üìà Chart Rendering Status</h3>
                                <div class="pipeline-container">
                                    <div class="pipeline-section">
                                        <h4>Dashboard Charts</h4>
                                        <div class="chart-status-list" id="dashboard-charts-status">
                                            <!-- Dynamically populated -->
                                        </div>
                                    </div>
                                    <div class="pipeline-section">
                                        <h4>Prediction Charts</h4>
                                        <div class="chart-status-list" id="prediction-charts-status">
                                            <!-- Dynamically populated -->
                                        </div>
                                    </div>
                                    <div class="pipeline-section">
                                        <h4>XAI Charts</h4>
                                        <div class="chart-status-list" id="xai-charts-status">
                                            <!-- Dynamically populated -->
                                        </div>
                                    </div>
                                    <div class="pipeline-section">
                                        <h4>Training Charts</h4>
                                        <div class="chart-status-list" id="training-charts-status">
                                            <!-- Dynamically populated -->
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- API & Data Pipeline Status -->
                            <div class="widget medium-widget">
                                <h3>üîó API & Data Pipeline</h3>
                                <div class="api-pipeline-status" id="api-pipeline-status">
                                    <!-- Dynamically populated -->
                                </div>
                            </div>

                            <!-- Feature Status -->
                            <div class="widget medium-widget">
                                <h3>‚öôÔ∏è Feature Status</h3>
                                <div class="feature-status-list" id="feature-status-list">
                                    <!-- Dynamically populated -->
                                </div>
                            </div>

                            <!-- Performance Metrics -->
                            <div class="widget medium-widget">
                                <h3>‚ö° Performance Metrics</h3>
                                <div class="performance-metrics" id="performance-metrics">
                                    <div class="metric-item">
                                        <span class="metric-label">Chart Load Time:</span>
                                        <span class="metric-value" id="chart-load-time">-</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">API Response Time:</span>
                                        <span class="metric-value" id="api-response-time">-</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">Memory Usage:</span>
                                        <span class="metric-value" id="memory-usage">-</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">JS Heap Size:</span>
                                        <span class="metric-value" id="js-heap-size">-</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Error Log -->
                            <div class="widget medium-widget">
                                <h3>üö® Recent Errors</h3>
                                <div class="error-log" id="error-log">
                                    <div class="log-controls">
                                        <button class="btn-small" onclick="debugDashboard.clearErrors()">Clear</button>
                                        <button class="btn-small" onclick="debugDashboard.refreshErrors()">Refresh</button>
                                    </div>
                                    <div class="error-list" id="error-list">
                                        <!-- Dynamically populated -->
                                    </div>
                                </div>
                            </div>

                            <!-- Debug Console -->
                            <div class="widget large-widget">
                                <h3>üñ•Ô∏è Debug Console</h3>
                                <div class="debug-console">
                                    <div class="console-output" id="console-output">
                                        <div class="console-line">
                                            <span class="console-timestamp">[2024-08-12 14:33:00]</span>
                                            <span class="console-level info">[INFO]</span>
                                            <span class="console-message">Debug Dashboard initialized</span>
                                        </div>
                                    </div>
                                    <div class="console-controls">
                                        <input type="text" id="console-input" placeholder="Enter debug command..." class="console-input">
                                        <button class="btn-small" onclick="debugDashboard.executeCommand()">Execute</button>
                                        <button class="btn-small" onclick="debugDashboard.clearConsole()">Clear</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- External Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Core Modules (Load First) -->
    <script src="modules/ModuleManager.js"></script>
    <script src="modules/EventBus.js"></script>
    <script src="modules/DataService.js"></script>
    <script src="modules/APIManager.js"></script>
    <script src="modules/ChartManager.js"></script>
    <script src="modules/PageController.js"></script>
    <script src="modules/ApplicationController.js"></script>
    
    <!-- Legacy Scripts (Keep for compatibility) -->
    <script src="chart-utils.js"></script>
    <script src="common-functions.js"></script>
    <script src="translator.js"></script>
    <script src="router.js"></script>
    <script src="sp500-api-manager.js"></script>
    <script src="api-config-panel.js"></script>
    <script src="news-analyzer.js"></script>
    <script src="dashboard-extended.js"></script>
    <script src="dashboard.js"></script>
    <script src="debug-dashboard.js"></script>
    
    <!-- Module System Integration -->
    <script>
      // Initialize module system when DOM is ready
      document.addEventListener('DOMContentLoaded', () => {
        console.log('üéØ Starting modular dashboard system...');
        
        // Check if modules are properly loaded
        if (!window.ModuleManager) {
          console.error('‚ùå ModuleManager failed to load!');
          return;
        }
        
        console.log('‚úÖ Module system ready');
      });
    </script>
</body>
</html>